{"ast":null,"code":"import _asyncToGenerator from \"C:/projetos/fisica/Fisica/src/Fisica.Website/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component, Input, ViewChild } from '@angular/core';\nimport { Cidade } from '../../shared/models/cidade.model';\nimport { Endereco } from '../../shared/models/endereco.model';\nimport { Instituicao } from '../../shared/models/instituicao.model';\nlet InserirInstituicaoComponent = class InserirInstituicaoComponent {\n  constructor(service, cidadeService, router) {\n    this.service = service;\n    this.cidadeService = cidadeService;\n    this.router = router;\n    this.cidade = new Cidade();\n    this.instituicao = new Instituicao();\n    this.instituicao.endereco = new Endereco();\n    this.cidades = [];\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.buscarCidades();\n    })();\n  }\n  buscarCidades() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.cidades = yield _this2.cidadeService.BuscarCidades().toPromise();\n    })();\n  }\n  inserir() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (_this3.formInstituicao.form.valid) {\n        _this3.instituicao.endereco.cidadeId = _this3.cidade.id;\n        _this3.instituicao.endereco.cidade = _this3.cidade;\n        yield _this3.service.inserir(_this3.instituicao).toPromise();\n        _this3.router.navigate([\"/instituicoes\"]);\n      }\n    })();\n  }\n};\n__decorate([ViewChild('formInstituicao')], InserirInstituicaoComponent.prototype, \"formInstituicao\", void 0);\n__decorate([Input()], InserirInstituicaoComponent.prototype, \"cidades\", void 0);\nInserirInstituicaoComponent = __decorate([Component({\n  selector: 'app-inserir-instituicao',\n  templateUrl: './inserir-instituicao.component.html',\n  styleUrls: ['./inserir-instituicao.component.css']\n})], InserirInstituicaoComponent);\nexport { InserirInstituicaoComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAS,EAAEC,KAAK,EAAUC,SAAS,QAAQ,eAAe;AAGnE,SAASC,MAAM,QAAQ,kCAAkC;AACzD,SAASC,QAAQ,QAAQ,oCAAoC;AAC7D,SAASC,WAAW,QAAQ,uCAAuC;AAS5D,IAAMC,2BAA2B,GAAjC,MAAMA,2BAA2B;EAUtCC,YACUC,OAA2B,EAC3BC,aAA4B,EAC5BC,MAAc;IAFd,YAAO,GAAPF,OAAO;IACP,kBAAa,GAAbC,aAAa;IACb,WAAM,GAANC,MAAM;IAEd,IAAI,CAACC,MAAM,GAAG,IAAIR,MAAM,EAAE;IAC1B,IAAI,CAACS,WAAW,GAAG,IAAIP,WAAW,EAAE;IACpC,IAAI,CAACO,WAAW,CAACC,QAAQ,GAAG,IAAIT,QAAQ,EAAE;IAC1C,IAAI,CAACU,OAAO,GAAG,EAAE;EACnB;EAEMC,QAAQ;IAAA;IAAA;MAEZ,MAAM,KAAI,CAACC,aAAa,EAAE;IAAC;EAC7B;EAEcA,aAAa;IAAA;IAAA;MACzB,MAAI,CAACF,OAAO,SAAU,MAAI,CAACL,aAAa,CAACQ,aAAa,EAAE,CAACC,SAAS,EAAI;IAAC;EACzE;EAEMC,OAAO;IAAA;IAAA;MACX,IAAI,MAAI,CAACC,eAAe,CAACC,IAAI,CAACC,KAAK,EAAE;QACnC,MAAI,CAACV,WAAW,CAACC,QAAS,CAACU,QAAQ,GAAG,MAAI,CAACZ,MAAM,CAACa,EAAE;QACpD,MAAI,CAACZ,WAAW,CAACC,QAAS,CAACF,MAAM,GAAG,MAAI,CAACA,MAAM;QAC/C,MAAM,MAAI,CAACH,OAAO,CAACW,OAAO,CAAC,MAAI,CAACP,WAAW,CAAC,CAACM,SAAS,EAAE;QACxD,MAAI,CAACR,MAAM,CAACe,QAAQ,CAAC,CAAC,eAAe,CAAC,CAAC;;IACxC;EACH;CACD;AApC+BC,YAA7BxB,SAAS,CAAC,iBAAiB,CAAC,oEAA0B;AAGvDwB,YADCzB,KAAK,EAAE,4DACU;AALPK,2BAA2B,eALvCN,SAAS,CAAC;EACT2B,QAAQ,EAAE,yBAAyB;EACnCC,WAAW,EAAE,sCAAsC;EACnDC,SAAS,EAAE,CAAC,qCAAqC;CAClD,CAAC,GACWvB,2BAA2B,CAsCvC;SAtCYA,2BAA2B","names":["Component","Input","ViewChild","Cidade","Endereco","Instituicao","InserirInstituicaoComponent","constructor","service","cidadeService","router","cidade","instituicao","endereco","cidades","ngOnInit","buscarCidades","BuscarCidades","toPromise","inserir","formInstituicao","form","valid","cidadeId","id","navigate","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\projetos\\fisica\\Fisica\\src\\Fisica.Website\\ClientApp\\src\\app\\admin\\inserir-instituicao\\inserir-instituicao.component.ts"],"sourcesContent":["import { Component, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Cidade } from '../../shared/models/cidade.model';\r\nimport { Endereco } from '../../shared/models/endereco.model';\r\nimport { Instituicao } from '../../shared/models/instituicao.model';\r\nimport { CidadeService } from '../../shared/services/cidade.service';\r\nimport { InstituicaoService } from '../../shared/services/instituicao.service';\r\n\r\n@Component({\r\n  selector: 'app-inserir-instituicao',\r\n  templateUrl: './inserir-instituicao.component.html',\r\n  styleUrls: ['./inserir-instituicao.component.css']\r\n})\r\nexport class InserirInstituicaoComponent implements OnInit {\r\n\r\n  @ViewChild('formInstituicao') formInstituicao!: NgForm;\r\n\r\n  @Input()\r\n  cidades: Cidade[];\r\n\r\n  instituicao!: Instituicao;\r\n  cidade: Cidade;\r\n\r\n  constructor(\r\n    private service: InstituicaoService,\r\n    private cidadeService: CidadeService,\r\n    private router: Router\r\n  ) {\r\n    this.cidade = new Cidade();\r\n    this.instituicao = new Instituicao();\r\n    this.instituicao.endereco = new Endereco();\r\n    this.cidades = [];\r\n  }\r\n\r\n  async ngOnInit() {\r\n\r\n    await this.buscarCidades();\r\n  }\r\n\r\n  private async buscarCidades() {\r\n    this.cidades = (await this.cidadeService.BuscarCidades().toPromise())!;\r\n  }\r\n\r\n  async inserir(): Promise<void> {\r\n    if (this.formInstituicao.form.valid) {\r\n      this.instituicao.endereco!.cidadeId = this.cidade.id;\r\n      this.instituicao.endereco!.cidade = this.cidade;\r\n      await this.service.inserir(this.instituicao).toPromise();\r\n      this.router.navigate([\"/instituicoes\"]);\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}